(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2627)}])},2627:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return OrdersPage}});var n=t(5893),d=t(6976),s=t(1664),i=t.n(s);let fetcher=e=>fetch(e).then(e=>e.json());function OrdersPage(){let{data:e,error:r,mutate:t}=(0,d.ZP)("/api/orders",fetcher,{refreshInterval:5e3});async function accept(e){try{let r=await fetch("/api/orders/".concat(e,"/accept"),{method:"POST"});if(!r.ok)throw Error("Ошибка");await t()}catch(e){console.error(e),alert("Не удалось принять заказ")}}return r?(0,n.jsx)("div",{children:"Ошибка загрузки"}):e?(0,n.jsxs)("main",{style:{padding:24,maxWidth:900,margin:"0 auto"},children:[(0,n.jsx)("h1",{children:"Заказы"}),(0,n.jsx)("p",{children:(0,n.jsx)(i(),{href:"/new",children:"Создать новый заказ"})}),(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{textAlign:"left"},children:"ID"}),(0,n.jsx)("th",{children:"Имя"}),(0,n.jsx)("th",{children:"Адрес"}),(0,n.jsx)("th",{children:"Описание"}),(0,n.jsx)("th",{children:"Цена"}),(0,n.jsx)("th",{children:"Статус"}),(0,n.jsx)("th",{children:"Действия"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>(0,n.jsxs)("tr",{style:{borderTop:"1px solid #ddd"},children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.address}),(0,n.jsx)("td",{children:e.description}),(0,n.jsx)("td",{children:e.price}),(0,n.jsx)("td",{children:e.status}),(0,n.jsx)("td",{children:"PENDING"===e.status?(0,n.jsx)("button",{onClick:()=>accept(e.id),children:"Принять"}):(0,n.jsx)("span",{children:"—"})})]},e.id))})]})]}):(0,n.jsx)("div",{children:"Загрузка..."})}}},function(e){e.O(0,[774,981,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);